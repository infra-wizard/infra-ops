 Get all repos and their collaborators
curl -s -H "Authorization: token $TOKEN" \
  "https://api.github.com/user/repos?per_page=100&affiliation=owner,collaborator,organization_member" | \
jq -r '.[].full_name' | \
while read repo; do
  curl -s -H "Authorization: token $TOKEN" \
    "https://api.github.com/repos/$repo/collaborators?affiliation=all" | \
    jq -r --arg repo "$repo" '.[] | "\(.login) | \($repo) | \(.role_name)"'
done


curl -s -H "Authorization: token $TOKEN" \
  "https://api.github.com/repos/Trail-Tech/koala/teams" | \
  jq -r '.[] | "\(.name) | \(.permission)"'



curl -s -H "Authorization: token $TOKEN" \
  "https://api.github.com/repos/Trail-Tech/koala/collaborators?affiliation=all" | \
  jq -r '.[] | "\(.login) | \(.role_name)"'


printf "%-20s | %-10s\n" "USERNAME" "PERMISSION"
printf "%.0s-" {1..35}; echo

curl -s -H "Authorization: token $TOKEN" \
  "https://api.github.com/repos/Trail-Tech/koala/collaborators?affiliation=all" | \
  jq -r '.[] | "\(.login)|\(.role_name)"' | \
  while IFS='|' read user perm; do
    printf "%-20s | %-10s\n" "$user" "$perm"
  done
