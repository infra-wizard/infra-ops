FROM bitnami/jmx-exporter:latest

# Switch to root to copy files
USER root

# Copy the JMX configuration
COPY jmx-config.yaml /opt/bitnami/jmx-exporter/config.yaml

# Set proper permissions
RUN chown -R 1001:1001 /opt/bitnami/jmx-exporter/config.yaml

# Switch back to non-root user
USER 1001

# Expose metrics port
EXPOSE 5556

# The Bitnami image already has the entrypoint configured
# Just override CMD to use our config
CMD ["5556", "/opt/bitnami/jmx-exporter/config.yaml"]
